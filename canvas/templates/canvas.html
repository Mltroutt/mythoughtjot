{% load postman_tags %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>mythoughtjot</title>
    <link rel="stylesheet" href="{{ MEDIA_URL }}css/style.css" type="text/css" media="screen" />
   <!-- <link rel="stylesheet" href="{{ MEDIA_URL }}css/menustyles.css" type="text/css" media="screen" /> -->
	<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
	<link rel="stylesheet" href="{{ MEDIA_URL }}css/jquery.svg.css" type="text/css" media="screen" />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script>!window.jQuery && document.write('<script src="{{ MEDIA_URL }}js/jquery-1.4.2.min.js"><\/script>')</script>
	<script src="{{ MEDIA_URL }}js/jQuery/jQuery.js"></script>

  	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script type='text/javascript' src='{{ MEDIA_URL }}js/pjs/processing-1.3.6.js'></script>
    <script type='text/javascript' src='{{ MEDIA_URL }}js/pjs/drawing.js'></script>
    <script type='text/javascript' src='{{ MEDIA_URL }}js/functions.js'></script>
    <script type='text/javascript' src='{{ MEDIA_URL }}js/jQuery/jquery.isotope.min.js'></script>
 	<script type="text/javascript" src="{{ MEDIA_URL }}js/jQuery/jqxcore.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}js/jQuery/jqxmenu.js"></script>	
  	<script src="http://tab-slide-out.googlecode.com/files/jquery.tabSlideOut.v1.3.js"></script>
	
	<script type="text/javascript" src="{{ MEDIA_URL }}js/visualize/visualize.jQuery.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/visualize/enhance.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/visualize/editabletable.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}css/visualize/basic.css"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}css/visualize/visualize.css"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}css/visualize/visualize-dark.css"></script>

	<script type="text/javascript" src="{{ MEDIA_URL }}js/svg/jquery.svg.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/svg/svg.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/raphael-min.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/jQuery/jquery.topzindex.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/jQuery/jquery-ink.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/jQuery/jquery-fillVertically.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/jQuery/common.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/jQuery/jquery.event.drag-1.5.min.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/classes.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/popup.js"></script>
	<script type="text/javascript" src="{{ MEDIA_URL }}js/jQuery/jquery.wysiwyg.js"></script>
		<script type="text/javascript" src="{{ MEDIA_URL }}js/graffle.js"></script>
</head>
<body>
    <noscript>mythoughtjot requires JavaScript to be enabled in your browser to work properly.</noscript>
<div id="wrapper">
  <div id="header">
	
              <div id="headerLeft">
              	
              	<div class="logo"><img src="{{ MEDIA_URL }}images/mythoughtjotLogoAASD.png" /></div>
			  </div><div class="help"></div>
        <div id="coRightHeader"> 
<h1 id="title">Welcome, {{ request.user.username }}</h1>
           
		</div> 
	</div>		<!-- end header-->
	
	<div id="leftCol">	
		<div id="sidebar">
            <div id='buttons'>
            	
                <ul>
                	<li onclick="changeToolbar('#drawingTools');initButtons();redo('pencil');"><div class="buttons" id="drawButton"><script type="text/javascript">renderIcon("pencil");</script></div></li>
                    <li onclick="changeToolbar('#textTools');redo('bubble');"><div class="buttons" id="textButton"><script type="text/javascript">renderIcon("bubble");</script></div></li>
                    <li onclick="changeToolbar('#shapeTools');redo('flipv');"><div class="buttons" id="shapeButton"><script type="text/javascript">renderIcon("flipv");</script></div></li>
                    <li onclick="changeToolbar('#tableTools');redo('barchart');"><div class="buttons" id="graphButton"><script type="text/javascript">renderIcon("barchart");</script></div></li>
                    <li onclick="changeToolbar('#sharingTools');redo('users');"><div class="buttons" id="shareButton"><script type="text/javascript">renderIcon("users");</script></div></li>
                    <li onclick="notfinishedyet();redo('search');"><div class="buttons" id="searchButton"><script type="text/javascript">renderIcon("search");</script></div></li>
					<li onclick="changeToolbar('#messagingTools');redo('mail');" id="messageButton"><div class="buttons" id="messagesButton"><script type="text/javascript">renderIcon("mail");</script></div></li>
					<li onclick="changeToolbar('#settings');redo('settings');"><div class="buttons" id="canvasButton"><script type="text/javascript">renderIcon("settings");</script></div></li>
     
                </ul>
            
        </div>
        
      <div id="popupContact">
      <a href="#" id="popupContactClose">X</a>
      <h1>Messages</h1>
       <div id="messagebox">
        <p>and here they are...</p>
       </div>
       <a href="#" id="popupContactGo">Go</a>
       </div>
       <div id="backgroundPopup"></div>

	</div> <!-- End Sidebar -->

 </div> <!-- end leftCol -->
 
 
<div id="rightCol">

		<div id="updateCol">

	
	<div id="coLeftHeader">
		
        <div class="slidedoutMenu">
		<div id="toolbox">


	<div class="toolWindow" id="drawingTools">
		<h1>Drawing</h1>
		<div class="inner">
			<input id="createBox" onclick="newDrawing();" type="button" value="New Drawing" />
				<input id="createBox" onclick="removeDrawing();" type="button" value="Remove Canvas" />
					<div id="modeRadio" class="left-stub">

				<input name="modeRadio" id="writingRadio" type="radio" value="writing" checked="checked" />
				<label for="writingRadio">WRITE</label>
				
				<input name="modeRadio" id="selectingRadio" type="radio" value="writing"/>
				<label for="selectingRadio">SELECT</label>				

				<input name="modeRadio" id="erasingRadio" type="radio" value="erasing" />
				<label for="erasingRadio">ERASE</label>
			</div>

			<div class="left-stub">
				<input id="clearButton" type="button" value="Clear" />
				
			</div>
		</div>
	</div>
	
	<div class="toolWindow" id="textTools">
		<h1>Text</h1>
		<div class="inner">
			<input id="createBox" onclick="createTextbox();" type="button" value="START" />
				<input id="createBox" onclick="removeTextbox();" type="button" value="REMOVE" />
				<h3>Create a Label</h3>
				<input type="text" id="addlabel"/>
				<input id="createtext" onclick="createLabel();" type="button" value="ADD" />
		</div>
	</div>
	
	<div class="toolWindow" id="shapeTools">
		<h1>Shapes</h1>
		<div class="inner">
		<input type="button" class="circle" onclick="drawCircle();" value="Circle"/>
		<input type="button" class="circle" onclick="drawEllipse();" value="Ellipse"/>
		<input type="button" class="circle" onclick="drawRect();" value="Rectangle"/>
		<input type="button" class="circle" onclick="drawRectwithRound();" value="Rounded Box"/>
		<!-- <input type="button" class="circle" onclick="drawLine();" value="Line"/>  -->
		
		</div>
	</div>
	
	<div class="toolWindow" id="tableTools">
		<h1>Tables and Graphs</h1>
		<label>Table Title:</label>
          <input type="button" class="addtabletitle" onclick="newTable()" value="New Table"/>
          <input type="text" id="addtabletitle"/>
          <input type="button" class="addtabletitle" onclick="newTableTitle()" value="Add Title"/>
          <input type="button"  class="addrowButton" onclick="addtablerow() " value="Add Row"/>
          <input type="button"  class="addcolumnButton" onclick="addtablecolumn()" value="Add Column"/>
        <label>Create Graph:</label>
       <input type="button" class="addtabletitle" onclick="barGraph()" value="Bar Graph"/>
	</div>
	
	<div class="toolWindow" id="sharingTools">
		<h1>Share</h1>
		<div class="inner">
			
		</div>
	</div>
	
	<div class="toolWindow" id="messagingTools">
		<h1>Messages</h1>
		<div class="inner">
			
		</div>
	</div>

	<div class="toolWindow" id="settings">
		<h1>Settings</h1>
		
		<div class="inner">
			<input type="button"  class="settings" onclick="clearCanvas()" value="Clear Canvas"/>
			<h3>Canvas Type:</h3>
			<input type="button"  class="background" onclick="changeCanvasBackground (1)" value="Notebook Paper"/>
			<input type="button"  class="background" onclick="changeCanvasBackground (2)" value="Graphing Paper"/>
			<input type="button"  class="background" onclick="changeCanvasBackground (3)" value="Sketch Paper"/>
			<input type="button"  class="background" onclick="changeCanvasBackground (4)" value="Plain White"/>
		</div>
	</div>


		</div>
		
           <section id="slidenav">

        <ul>  	
            <li class="nitem"><a href="#">Me</a></li>
                <ul class="nsub">
                    <li><a href="/project/create/">New Project <img src="{{ MEDIA_URL }}images/new.png"> </a></li>
                    {% for project in projects %}
                    <li><a href="/project/{{ project.pk }}/">{{ project.title }}</a></li>
                    {% endfor %}
                    {% if projects.count > 3 %}
                    <li><a href="/project/myprojects/">More...</a></li>
                    {% endif %}

                </ul>
            <li class="nitem"><a href="#"><span></span> Others</a></li>
                <ul class="nsub">
                    <li><a href="#">Project 1</a></li>
                    <li><a href="#">Project 2</a></li>
                    <li><a href="#">Project 3</a></li>
                </ul>
            <li class="nitem"><a href="#">Collaborators</a></li>
                <ul class="nsub collaborators"  id="updatesTab">
                	<a class="add_collaborator" href="/canvas/{{ canvas.pk }}/add-collaborator/"><img src="{{ MEDIA_URL }}images/add.png" alt="Add" title="Add" /> Add a new collaborator</a>
                    {% for user in canvas.collaborators.all %}
                        <li class="update"><div class="collaborator_box"><img src="{{ MEDIA_URL }}images/waht.png" width="25px" height="25px"><a class="user_link" href="/user/{{ user.username }}/">{{ user.username }}</a><a class="remove_collaborator" href="/canvas/{{ canvas.pk }}/remove-collaborator/{{ user.pk }}/"><img src="{{ MEDIA_URL }}images/delete.png" alt="Remove" title="Remove" /></a></div></li>
                    {% endfor %}
                </ul>

        </ul>
    </section>
    
<script type="text/javascript">
		$(document).ready(function() {
			$('.nsub').hide(); // hide sub-navigation items by default
			
			$('.nitem a').live('click', function(e){
				e.preventDefault();
				$(this).parent().next('.nsub').slideToggle('slow');
				
				if($(this).parent().next('.nsub').is(':hidden')) {
                    $(this).addClass("CurrentlySelected");
                } else {
                    $(this).removeClass("CurrentlySelected");
                }
			});
            function checkmessages() {
                //{% postman_unread as unread_count %}
                alert('You have {{ unread_count }} unread messages.');
            }

            /*
            * Canvas creation modal bax
            */
            $("#canvas_create").click(function(e){
            var url = '/canvas/create_modal/';
                        var dialog = $('<div style="display:none"></div>').appendTo('body');
                        dialog.load(
                            url,
                            function (responseText, textStatus, XMLHttpRequest) {
                                dialog.dialog({
                                 draggable: false,
                                 width: 'auto',
                                 modal: true,
                                    // add a close listener to prevent adding multiple divs to the document
                                    close: function(event, ui) {
                                        // remove div with all data and events
                                        dialog.remove();
                                    }
                                });
                            }
                        );
                        //prevent the browser to follow the link
                        return false;
            });
            $(".add_collaborator").live('click', function(e){
            var url = '/canvas/{{ canvas.pk }}/add-collaborator';
                        var dialog = $('<div style="display:none"></div>').appendTo('body');
                        dialog.load(
                            url,
                            function (responseText, textStatus, XMLHttpRequest) {
                                dialog.dialog({
                                 draggable: false,
                                 width: 'auto',
                                 modal: true,
                                    // add a close listener to prevent adding multiple divs to the document
                                    close: function(event, ui) {
                                        // remove div with all data and events
                                        dialog.remove();
                                    }
                                });
                            }
                        );
                        //prevent the browser to follow the link
                        return false;
            });
            $(".remove_collaborator").live('click', function(e){
	            e.preventDefault();
	            if(confirm("Delete this collaborator?")){
	                var link = $(this).attr("href");
	
	                $.get(link, function(data){
	                    if(data['success']){
	                        alert(data['message']);
	                        $("ul#updatesTab").empty();
							//console.log(data['collaborators'])
							$("ul#updatesTab").append('<a class=\"add_collaborator\" href="/canvas/{{ canvas.pk }}/add-collaborator/"><img src="/media/images/add.png" alt="Add" title="Add" /> Add a new collaborator</a>');
							for(collaborator in data['collaborators']) {
								//console.log(data['collaborators'][collaborator])
								$("ul#updatesTab").append('<li class=\"update\"><div class=\"collaborator_box\"><img src=\"/media/images/waht.png\" width=\"25px\" height=\"25px\"><a class=\"user_link\" href=\"/user/' + data['collaborators'][collaborator]["name"] + '/\">' + data['collaborators'][collaborator]['name'] + '</a><a class=\"remove_collaborator\" href=\"/canvas/'+canvas+'/remove-collaborator/' + data['collaborators'][collaborator]["id"] + '/\"><img src="/media/images/delete.png\" alt=\"Remove\" title=\"Remove\" /></a></div></li>');
							}
	                    }else{
	                        alert(data['error']);
	                    }
	                });
	            }
            });
		});
	</script>

        
          </div>   <!-- end slideoutMenu -->
		</div> <!-- end coLeftHeader -->
	</div>		<!-- end updateCol-->

<div id="content">
	<div id="canvas">
  <div id="table">
      
	<table id="celebs">
		<caption><h3 id="tableTitle">My Table</h3></caption>
      <tbody>
        <tr>
          <td>Matt Girard</td>
          <td>225</td>
          <td>320</td>
          <td>223</td>
        </tr>
        <tr>
          <td>Kate McCormly</td>
          <td>289</td>
          <td>123</td>
          <td>147</td>
        </tr>
        <tr>
          <td>Joy Cornwell</td>
          <td>332</td>
          <td>312</td>
          <td>256</td>
        </tr>
        <tr>
          <td>Josh Crews</td>
          <td>125</td>
          <td>176</td>
          <td>130</td>
        </tr>
      </tbody>
    </table>
 
  </div>
        

		<!--
		<style type="text/css">
		      #holder {
                -moz-border-radius: 10px;
                -webkit-border-radius: 10px;
                border: solid 1px #333;
            }
            </style>
		<div id="holder"></div>
		-->
  </div>  <!-- end canvas -->
 </div>  <!-- end content -->
 
 	<div id="rightfooter">
	</div><!-- end rightfooter -->
  </div> <!-- end rightCol -->
 </div> <!-- end wrapper -->
</body>
</html>
